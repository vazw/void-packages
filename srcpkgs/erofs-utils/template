# Template file for 'erofs-utils'
pkgname=erofs-utils
version=1.9
revision=1
build_style=gnu-configure
configure_args="
 --enable-fuse
 --enable-lz4
 --enable-lzma
 --enable-oci
 --enable-s3
 --with-json-c
 --with-libcurl
 --with-libnl3
 --with-libxml2
 --with-libzstd
 --with-openssl
 --with-xxhash
 --with-zlib"
hostmakedepends="automake libtool pkg-config"
makedepends="fuse-devel json-c-devel libcurl-devel liblz4-devel liblzma-devel
 libnl3-devel libuuid-devel libxml2-devel libzstd-devel openssl-devel
 xxHash-devel zlib-devel"
short_desc="User-space tools for EROFS filesystem"
maintainer="Duncaen <duncaen@voidlinux.org>"
license="GPL-2.0-or-later"
homepage="https://git.kernel.org/pub/scm/linux/kernel/git/xiang/erofs-utils.git/about/"
changelog="https://git.kernel.org/pub/scm/linux/kernel/git/xiang/erofs-utils.git/plain/ChangeLog"
distfiles="https://git.kernel.org/pub/scm/linux/kernel/git/xiang/erofs-utils.git/snapshot/erofs-utils-${version}.tar.gz"
checksum=d1bc84b5d60bcae121a7f57ea97d4155189087e178f8127f30846d9f537c9d73

pre_configure() {
	autoreconf -fi
}

fuse-erofs_package() {
	depends="${sourcepkg}>=${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/bin/erofsfuse
		vmove usr/share/man/man1/erofsfuse.1
	}
}
